<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>wcWebCamClient library: JSON sub-protocol description</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxy.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="wclogo_c.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">wcWebCamClient library
   &#160;<span id="projectnumber">0.7</span>
   </div>
   <div id="projectbrief">Library for convenient work with the wcWebCamServer server via the JSON protocol.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_j_s_o_n_protocol_home.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">JSON sub-protocol description </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#getConfig">getConfig.json</a><ul><li class="level2"><a href="#autotoc_md1">Request</a></li>
<li class="level2"><a href="#autotoc_md2">Response</a></li>
<li class="level2"><a href="#autotoc_md3">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#setConfig">setConfig.json</a><ul><li class="level2"><a href="#autotoc_md4">Request</a></li>
<li class="level2"><a href="#autotoc_md5">Response</a></li>
<li class="level2"><a href="#autotoc_md6">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#ServerConfig">A set of current REST Web Camera Server configurations</a></li>
<li class="level1"><a href="#DataStreamFormat">Data stream format</a></li>
<li class="level1"><a href="#output">output.raw</a><ul><li class="level2"><a href="#autotoc_md7">Request</a></li>
<li class="level2"><a href="#autotoc_md8">Response</a></li>
<li class="level2"><a href="#autotoc_md9">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#input">input.raw</a><ul><li class="level2"><a href="#autotoc_md10">Request</a></li>
<li class="level2"><a href="#autotoc_md11">Response</a></li>
<li class="level2"><a href="#autotoc_md12">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#authorize">authorize.json</a><ul><li class="level2"><a href="#autotoc_md13">Request</a></li>
<li class="level2"><a href="#autotoc_md14">Response</a></li>
<li class="level2"><a href="#autotoc_md15">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#addRecord">addRecord.json</a><ul><li class="level2"><a href="#autotoc_md16">Request</a></li>
<li class="level2"><a href="#autotoc_md17">Response</a></li>
<li class="level2"><a href="#autotoc_md18">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#addMsgs">addMsgs.json</a><ul><li class="level2"><a href="#autotoc_md19">Request</a></li>
<li class="level2"><a href="#autotoc_md20">Response</a></li>
<li class="level2"><a href="#autotoc_md21">Sync message</a></li>
<li class="level2"><a href="#autotoc_md22">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#getRecordMeta">getRecordMeta.json</a><ul><li class="level2"><a href="#autotoc_md23">Request</a></li>
<li class="level2"><a href="#autotoc_md24">Response</a></li>
<li class="level2"><a href="#autotoc_md25">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#getRecordData">getRecordData.json</a><ul><li class="level2"><a href="#autotoc_md26">Request</a></li>
<li class="level2"><a href="#autotoc_md27">Response</a></li>
<li class="level2"><a href="#autotoc_md28">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#getRecordCount">getRecordCount.json</a><ul><li class="level2"><a href="#autotoc_md29">Request</a></li>
<li class="level2"><a href="#autotoc_md30">Response</a></li>
<li class="level2"><a href="#autotoc_md31">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#getMsgsAndSync">getMsgsAndSync.json</a></li>
<li class="level1"><a href="#getMsgs">getMsgs.json</a><ul><li class="level2"><a href="#autotoc_md32">Request</a></li>
<li class="level2"><a href="#autotoc_md33">Response</a></li>
<li class="level2"><a href="#autotoc_md34">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#getDevicesOnline">getDevicesOnline.json</a><ul><li class="level2"><a href="#autotoc_md35">Request</a></li>
<li class="level2"><a href="#autotoc_md36">Response</a></li>
<li class="level2"><a href="#autotoc_md37">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#getStreams">getStreams.json</a><ul><li class="level2"><a href="#autotoc_md38">Request</a></li>
<li class="level2"><a href="#autotoc_md39">Response</a></li>
<li class="level2"><a href="#autotoc_md40">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#deleteRecords">deleteRecords.json</a><ul><li class="level2"><a href="#autotoc_md41">Request</a></li>
<li class="level2"><a href="#autotoc_md42">Response</a></li>
<li class="level2"><a href="#autotoc_md43">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#heartBit">heartBit.json</a><ul><li class="level2"><a href="#autotoc_md44">Request</a></li>
<li class="level2"><a href="#autotoc_md45">Response</a></li>
<li class="level2"><a href="#autotoc_md46">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#JSON_BAD">JSON_BAD message format</a></li>
</ul>
</div>
<div class="textblock"><p>Data exchange between devices is carried out according to the HTTP/2 protocol using the POST method. The contents of requests and responses are JSON objects. Both methods of passing parameters from the client to the server are available - as a URL string after the "?" (where it is possible or necessary) or/and in the content of the request as a string describing the JSON object. The server always responds with a JSON object in the content of the response (excluding the <a class="el" href="_j_s_o_n_protocol_home.html#getRecordData">getRecordData.json</a> request).</p>
<p>The following requests are allowed</p>
<ul>
<li><a class="el" href="_j_s_o_n_protocol_home.html#authorize">authorize.json</a></li>
<li><a class="el" href="_j_s_o_n_protocol_home.html#addRecord">addRecord.json</a></li>
<li><a class="el" href="_j_s_o_n_protocol_home.html#addMsgs">addMsgs.json</a></li>
<li><a class="el" href="_j_s_o_n_protocol_home.html#getRecordMeta">getRecordMeta.json</a></li>
<li><a class="el" href="_j_s_o_n_protocol_home.html#getRecordData">getRecordData.json</a></li>
<li><a class="el" href="_j_s_o_n_protocol_home.html#getRecordCount">getRecordCount.json</a></li>
<li><a class="el" href="_j_s_o_n_protocol_home.html#deleteRecords">deleteRecords.json</a></li>
<li><a class="el" href="_j_s_o_n_protocol_home.html#getMsgs">getMsgs.json</a></li>
<li><a class="el" href="_j_s_o_n_protocol_home.html#getMsgsAndSync">getMsgsAndSync.json</a></li>
<li><a class="el" href="_j_s_o_n_protocol_home.html#getDevicesOnline">getDevicesOnline.json</a></li>
<li><a class="el" href="_j_s_o_n_protocol_home.html#getStreams">getStreams.json</a></li>
<li><a class="el" href="_j_s_o_n_protocol_home.html#getConfig">getConfig.json</a></li>
<li><a class="el" href="_j_s_o_n_protocol_home.html#setConfig">setConfig.json</a></li>
<li><a class="el" href="_j_s_o_n_protocol_home.html#heartBit">heartBit.json</a></li>
</ul>
<p>Streaming</p><ul>
<li><a class="el" href="_j_s_o_n_protocol_home.html#output">output.raw</a></li>
<li><a class="el" href="_j_s_o_n_protocol_home.html#input">input.raw</a></li>
</ul>
<p><a href="https://github.com/iLya2IK/webcamdevice">Example of protocol application and possible message format for a client-server application</a></p>
<hr  />
<h1><a class="anchor" id="getConfig"></a>
getConfig.json</h1>
<p>Receiving a set of configurations from server. Description of the server configuration you can find here.</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Request</h2>
<p>The JSON object</p>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;shash&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>}</div>
</div><!-- fragment --><p>Possible (alternative) query string <code><a href="https://localhost/getConfig.json?shash=string">https://localhost/getConfig.json?shash=string</a></code></p>
<h3>Parameters</h3>
<ul>
<li><em><b>shash</b></em> - session id (required)</li>
</ul>
<h2><a class="anchor" id="autotoc_md2"></a>
Response</h2>
<h3>JSON_OK response</h3>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;config&quot;</span>:[{<span class="stringliteral">&quot;kind&quot;</span>:0,<span class="stringliteral">&quot;descr&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>,<span class="stringliteral">&quot;miv&quot;</span>:0.0,<span class="stringliteral">&quot;mav&quot;</span>:0.0,<span class="stringliteral">&quot;dv&quot;</span>:0.0,<span class="stringliteral">&quot;fv&quot;</span>:0.0},...],<span class="stringliteral">&quot;result&quot;</span>:<span class="stringliteral">&quot;OK&quot;</span>}</div>
</div><!-- fragment --><ul>
<li><em><b>config</b></em> - the array of configurations received</li>
<li><em><b>kind</b></em> - the integer id of a specific configuration</li>
<li><em><b>descr</b></em> - description for a specific configuration</li>
<li><em><b>miv</b></em> - minimum allowed value for a specific configuration</li>
<li><em><b>mav</b></em> - maximum allowed value for a specific configuration</li>
<li><em><b>dv</b></em> - default value for a specific configuration</li>
<li><em><b>fv</b></em> - current value for a specific configuration that applied for account</li>
</ul>
<h3>JSON_BAD response</h3>
<p><a class="el" href="_j_s_o_n_protocol_home.html#JSON_BAD">JSON_BAD response format and description of error codes</a></p>
<h2><a class="anchor" id="autotoc_md3"></a>
Example</h2>
<div class="fragment"><div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;}&#39; -X POST https://localhost:8080/getConfig.json</div>
<div class="line">{&quot;config&quot;:[{&quot;kind&quot;:1,&quot;descr&quot;:&quot;old records timeout (days)&quot;,&quot;miv&quot;:4.0E-003,&quot;mav&quot;:1.68E+002,&quot;dv&quot;:3.0E+001,&quot;fv&quot;:3.0E+001},{&quot;kind&quot;:2,&quot;descr&quot;:&quot;dead sessions timeout (minutes)&quot;,&quot;miv&quot;:3.0E+000,&quot;mav&quot;:3.0E+001,&quot;dv&quot;:1.0E+001,&quot;fv&quot;:1.0E+001},{&quot;kind&quot;:3,&quot;descr&quot;:&quot;max requests for session&quot;,&quot;miv&quot;:2.0E+002,&quot;mav&quot;:1.0E+004,&quot;dv&quot;:1.5E+003,&quot;fv&quot;:1.5E+003},{&quot;kind&quot;:4,&quot;descr&quot;:&quot;max reqs per min for session&quot;,&quot;miv&quot;:2.0E+001,&quot;mav&quot;:2.0E+002,&quot;dv&quot;:5.0E+001,&quot;fv&quot;:5.0E+001}],&quot;result&quot;:&quot;OK&quot;}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="setConfig"></a>
setConfig.json</h1>
<p>Send a set of configurations to server. Description of the server configuration you can find here.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Request</h2>
<p>The JSON object</p>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;shash&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>,<span class="stringliteral">&quot;config&quot;</span>:[{<span class="stringliteral">&quot;kind&quot;</span>:0,<span class="stringliteral">&quot;fv&quot;</span>:0.0},...]}</div>
</div><!-- fragment --><p>Possible (alternative) query string <code><a href="https://localhost/setConfig.json?shash=string&config=%5Bobject_array%5D">https://localhost/setConfig.json?shash=string&amp;config=%5Bobject_array%5D</a></code></p>
<h3>Parameters</h3>
<ul>
<li><em><b>shash</b></em> - session id (required)</li>
<li><em><b>config</b></em> - array of sent configurations</li>
<li><em><b>kind</b></em> - integer id of a specific configuration</li>
<li><em><b>fv</b></em> - current value for a specific configuration that applied for account</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
Response</h2>
<h3>JSON_OK response</h3>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;result&quot;</span>:<span class="stringliteral">&quot;OK&quot;</span>}</div>
</div><!-- fragment --><h3>JSON_BAD response</h3>
<p><a class="el" href="_j_s_o_n_protocol_home.html#JSON_BAD">JSON_BAD response format and description of error codes</a></p>
<h2><a class="anchor" id="autotoc_md6"></a>
Example</h2>
<div class="fragment"><div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;,&quot;config&quot;:[{&quot;kind&quot;:1,&quot;fv&quot;:1.0},{&quot;kind&quot;:4,&quot;fv&quot;:100}]}&#39; -X POST https://localhost:8080/setConfig.json</div>
<div class="line">{&quot;result&quot;:&quot;OK&quot;}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="ServerConfig"></a>
A set of current REST Web Camera Server configurations</h1>
<table class="doxtable">
<tr>
<th>kind </th><th>description </th><th>minimum </th><th>maximum </th><th>default  </th></tr>
<tr>
<td>1 </td><td>old records timeout (days) </td><td>0.004 </td><td>168 </td><td>30  </td></tr>
<tr>
<td>2 </td><td>dead sessions timeout (minutes) </td><td>3 </td><td>30 </td><td>10  </td></tr>
<tr>
<td>3 </td><td>max requests for session </td><td>200 </td><td>10000 </td><td>1500  </td></tr>
<tr>
<td>4 </td><td>max requests per minute for session </td><td>20 </td><td>200 </td><td>50  </td></tr>
</table>
<hr  />
<h1><a class="anchor" id="DataStreamFormat"></a>
Data stream format</h1>
<p>A valid data stream is a sequence of frames of the following format:</p>
<div class="fragment"><div class="line">+--------------+</div>
<div class="line">| Data frame 1 |</div>
<div class="line">+--------------+</div>
<div class="line">| Data frame 2 |</div>
<div class="line">+--------------+</div>
<div class="line">.......</div>
<div class="line">+--------------+</div>
<div class="line">| Data frame N |</div>
<div class="line">+--------------+</div>
</div><!-- fragment --><p>Each data frame has the format shown below (the number of bits is indicated in parentheses). </p><div class="fragment"><div class="line">+-------------------+</div>
<div class="line">|  Header seq (16)  |  = 0xaaaa</div>
<div class="line">+-------------------+</div>
<div class="line">| Payload size (32) |</div>
<div class="line">+-------------------+</div>
<div class="line">|   Payload (0..*)  |</div>
<div class="line">+-------------------+</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="output"></a>
output.raw</h1>
<p>Open data stream from device.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Request</h2>
<p>JSON object in request content is not allowed. Query string <code><a href="https://localhost/output.raw?shash=string">https://localhost/output.raw?shash=string</a></code> The content of the request must contain formatted frames data.</p>
<h3>Parameters</h3>
<ul>
<li><em><b>shash</b></em> - session id (required)</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
Response</h2>
<p>There is no formatted response. If an error occurs, the stream is closed by the host.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Example</h2>
<div class="fragment"><div class="line">curl --http2 -k --data-binary &#39;@data.raw&#39; -X POST https://localhost:8080/addRecordData.json?shash=ra5PNJRgzrqpwbfw8JvHIkWuxJE%3D</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="input"></a>
input.raw</h1>
<p>Receiving data stream from selected device.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Request</h2>
<p>JSON object in request content is not allowed. Query string <code><a href="https://localhost/input.raw?shash=string&device=string">https://localhost/input.raw?shash=string&amp;device=string</a></code></p>
<h3>Parameters</h3>
<ul>
<li><em><b>shash</b></em> - session id (required)</li>
<li><em><b>device</b></em> - selected device name (required). Value can be obtained with <a class="el" href="_j_s_o_n_protocol_home.html#getDevicesOnline">getDevicesOnline.json</a> and <a class="el" href="_j_s_o_n_protocol_home.html#getStreams">getStreams.json</a> requests</li>
</ul>
<h2><a class="anchor" id="autotoc_md11"></a>
Response</h2>
<h3>JSON_OK response</h3>
<p>Server open the data stream from selected device. The description of data stream format you can find here</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Example</h2>
<div class="fragment"><div class="line">&gt; curl --http2 -k -X POST https://localhost:8080/input.raw?shash=ra5PNJRgzrqpwbfw8JvHIkWuxJE%3D&amp;device=camera_device</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="authorize"></a>
authorize.json</h1>
<p>Authorizes the device on the server under the specified account. </p>
<h2><a class="anchor" id="autotoc_md13"></a>
Request</h2>
<p>The JSON object</p>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;name&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;pass&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;device&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;meta&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>}</div>
</div><!-- fragment --><p>Possible (alternative) query string <code><a href="https://localhost/authorize.json?name=string&pass=string&device=string">https://localhost/authorize.json?name=string&amp;pass=string&amp;device=string</a></code></p>
<h3>Parameters</h3>
<ul>
<li><em><b>name</b></em> - the name of user's account (required)</li>
<li><em><b>pass</b></em> - the password for user's account (required)</li>
<li><em><b>device</b></em> - device name - a unique value within one account to identify the target and source of the message - usually the device's mac address (required)</li>
<li><em><b>meta</b></em> - metadata for this device (optional)</li>
</ul>
<h2><a class="anchor" id="autotoc_md14"></a>
Response</h2>
<h3>JSON_OK response</h3>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;shash&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;result&quot;</span>:<span class="stringliteral">&quot;OK&quot;</span>}</div>
</div><!-- fragment --><ul>
<li><em><b>shash</b></em> - new session id returned</li>
</ul>
<h3>JSON_BAD response</h3>
<p><a class="el" href="_j_s_o_n_protocol_home.html#JSON_BAD">JSON_BAD response format and description of error codes</a></p>
<h2><a class="anchor" id="autotoc_md15"></a>
Example</h2>
<div class="fragment"><div class="line">&gt; curl --http2 -k -d &#39;{&quot;name&quot;:&quot;user&quot;,&quot;pass&quot;:&quot;111&quot;,&quot;device&quot;:&quot;user_pc&quot;,&quot;meta&quot;:&quot;some info&quot;}&#39; -X POST https://localhost:8080/authorize.json</div>
<div class="line">{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;,&quot;result&quot;:&quot;OK&quot;}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="addRecord"></a>
addRecord.json</h1>
<p>Send blob data and create new media record.</p>
<h2><a class="anchor" id="autotoc_md16"></a>
Request</h2>
<p>JSON object in request content is not allowed. The content of the request must contain raw blob data.</p>
<p>Query string <code><a href="https://localhost/addRecord.json?shash=string&meta=string">https://localhost/addRecord.json?shash=string&amp;meta=string</a></code></p>
<h3>Parameters</h3>
<ul>
<li><em><b>shash</b></em> - session id (required)</li>
<li><em><b>meta</b></em> - text data assigned to the media record by the client. For example, the format of the media record can be specified here. By default, the media record format is JPEG.</li>
</ul>
<h2><a class="anchor" id="autotoc_md17"></a>
Response</h2>
<h3>JSON_OK response</h3>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;result&quot;</span>:<span class="stringliteral">&quot;OK&quot;</span>}</div>
</div><!-- fragment --><h3>JSON_BAD response</h3>
<p><a class="el" href="_j_s_o_n_protocol_home.html#JSON_BAD">JSON_BAD response format and description of error codes</a></p>
<h2><a class="anchor" id="autotoc_md18"></a>
Example</h2>
<div class="fragment"><div class="line">&gt; curl --http2 -k --data-binary &#39;@inp.png&#39; -X POST https://localhost:8080/addRecordData.json?shash=ra5PNJRgzrqpwbfw8JvHIkWuxJE%3D&amp;meta=PNG</div>
<div class="line">{&quot;result&quot;:&quot;OK&quot;}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="addMsgs"></a>
addMsgs.json</h1>
<p>Send messages to the server.</p>
<h2><a class="anchor" id="autotoc_md19"></a>
Request</h2>
<p>The JSON object</p>
<p>variant 1</p>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;shash&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;msg&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;target&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;params&quot;</span>:{...}}</div>
</div><!-- fragment --><p>variant 2</p>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;shash&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;msgs&quot;</span>:[{<span class="stringliteral">&quot;msg&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;target&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;params&quot;</span>:{...}},...]}</div>
</div><!-- fragment --><p>Possible (alternative) query string <code><a href="https://localhost/addMsgs.json?shash=string&msg=string&device=string&target=string&params=string">https://localhost/addMsgs.json?shash=string&amp;msg=string&amp;device=string&amp;target=string&amp;params=string</a></code></p>
<h3>Parameters</h3>
<ul>
<li><em><b>shash</b></em> - session id (required)</li>
<li><em><b>msg</b></em> - the name of the message inside the internal logic of your client-server application (required)</li>
<li><em><b>target</b></em> - message recipient device name (optional). If this parameter is empty, the message is broadcast and will be sent to all devices in the account.</li>
<li><em><b>params</b></em> - message parameters inside the internal logic of your client-server application (optional)</li>
<li><em><b>msgs</b></em> - the array of messages to send (optional)</li>
</ul>
<h2><a class="anchor" id="autotoc_md20"></a>
Response</h2>
<h3>JSON_OK response</h3>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;result&quot;</span>:<span class="stringliteral">&quot;OK&quot;</span>}</div>
</div><!-- fragment --><h3>JSON_BAD response</h3>
<p><a class="el" href="_j_s_o_n_protocol_home.html#JSON_BAD">JSON_BAD response format and description of error codes</a></p>
<h2><a class="anchor" id="autotoc_md21"></a>
Sync message</h2>
<p>After receiving messages from the server, the client application must send a synchronization message, otherwise the messages will be resent by the server. The format of sync message is </p><div class="fragment"><div class="line">{<span class="stringliteral">&quot;shash&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;msg&quot;</span>:<span class="stringliteral">&quot;sync&quot;</span>}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md22"></a>
Example</h2>
<div class="fragment"><div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;,&quot;msg&quot;:&quot;obey&quot;,&quot;params&quot;:{&quot;please&quot;:1}}&#39; -X POST https://localhost:8080/addMsgs.json</div>
<div class="line">{&quot;result&quot;:&quot;OK&quot;}</div>
<div class="line"> </div>
<div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;,&quot;msgs&quot;:[{&quot;msg&quot;:&quot;status&quot;,&quot;target&quot;:&quot;device1&quot;},{&quot;msg&quot;:&quot;shutdown&quot;,&quot;target&quot;:&quot;device2&quot;}]&#39; -X POST https://localhost:8080/addMsgs.json</div>
<div class="line">{&quot;result&quot;:&quot;OK&quot;}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="getRecordMeta"></a>
getRecordMeta.json</h1>
<p>Receiving metadata for a media record from the server.</p>
<h2><a class="anchor" id="autotoc_md23"></a>
Request</h2>
<p>The JSON object</p>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;shash&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;rid&quot;</span>:integer}</div>
</div><!-- fragment --><p>Possible (alternative) query string <code><a href="https://localhost/getRecordMeta.json?shash=string&rid=integer">https://localhost/getRecordMeta.json?shash=string&amp;rid=integer</a></code></p>
<h3>Parameters</h3>
<ul>
<li><em><b>shash</b></em> - session id (required)</li>
<li><em><b>rid</b></em> - the id of a media record (required). Value can be obtained with <a class="el" href="_j_s_o_n_protocol_home.html#getRecordCount">getRecordCount.json</a> request</li>
</ul>
<h2><a class="anchor" id="autotoc_md24"></a>
Response</h2>
<h3>JSON_OK response</h3>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;device&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>,<span class="stringliteral">&quot;record&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>,<span class="stringliteral">&quot;stamp&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>,<span class="stringliteral">&quot;result&quot;</span>:<span class="stringliteral">&quot;OK&quot;</span>}</div>
</div><!-- fragment --><ul>
<li><em><b>device</b></em> - media record emitter device name.</li>
<li><em><b>record</b></em> - text data assigned to the media record by the client. For example, the format of the media record can be specified here. By default, the media record format is JPEG.</li>
<li><em><b>stamp</b></em> - the timestamp of a media record. The timestamp is in a format determined by the server and may not match the client's local settings.</li>
</ul>
<h3>JSON_BAD response</h3>
<p><a class="el" href="_j_s_o_n_protocol_home.html#JSON_BAD">JSON_BAD response format and description of error codes</a></p>
<h2><a class="anchor" id="autotoc_md25"></a>
Example</h2>
<div class="fragment"><div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;,&quot;rid&quot;:34}&#39; -X POST https://localhost:8080/getRecordMeta.json</div>
<div class="line">{&quot;device&quot;:&quot;34945423FA90&quot;,&quot;record&quot;:&quot;&quot;,&quot;stamp&quot;:&quot;2022-02-07 12:29:36&quot;,&quot;result&quot;:&quot;OK&quot;}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="getRecordData"></a>
getRecordData.json</h1>
<p>Receiving blob data for a media record from the server.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
Request</h2>
<p>The JSON object</p>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;shash&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;rid&quot;</span>:integer}</div>
</div><!-- fragment --><p>Possible (alternative) query string <code><a href="https://localhost/getRecordData.json?shash=string&rid=integer">https://localhost/getRecordData.json?shash=string&amp;rid=integer</a></code></p>
<h3>Parameters</h3>
<ul>
<li><em><b>shash</b></em> - session id (required)</li>
<li><em><b>rid</b></em> - the id of a media record (required). Value can be obtained with <a class="el" href="_j_s_o_n_protocol_home.html#getRecordCount">getRecordCount.json</a> request</li>
</ul>
<h2><a class="anchor" id="autotoc_md27"></a>
Response</h2>
<h3>JSON_OK response</h3>
<p>Server returns a raw blob data for selected media record.</p>
<h3>JSON_BAD response</h3>
<p><a class="el" href="_j_s_o_n_protocol_home.html#JSON_BAD">JSON_BAD response format and description of error codes</a></p>
<h2><a class="anchor" id="autotoc_md28"></a>
Example</h2>
<div class="fragment"><div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;,&quot;rid&quot;:34}&#39; -X POST https://localhost:8080/getRecordData.json -o out.jpg</div>
<div class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</div>
<div class="line">                                 Dload  Upload   Total   Spent    Left  Speed</div>
<div class="line">100 41480  100 41431  100    49   299k    363 --:--:-- --:--:-- --:--:--  302k</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="getRecordCount"></a>
getRecordCount.json</h1>
<p>Receiving a list of media records from the server. The server sends only a list of records, to get the data of the record, the client must request each record separately by <a class="el" href="_j_s_o_n_protocol_home.html#getRecordData">getRecordData.json</a> request.</p>
<h2><a class="anchor" id="autotoc_md29"></a>
Request</h2>
<p>The JSON object</p>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;shash&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;stamp&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>}</div>
</div><!-- fragment --><p>Possible (alternative) query string <code><a href="https://localhost/getRecordCount.json?shash=string&stamp=string">https://localhost/getRecordCount.json?shash=string&amp;stamp=string</a></code></p>
<h3>Parameters</h3>
<ul>
<li><em><b>shash</b></em> - session id (required)</li>
<li><em><b>stamp</b></em> - the timestamp of the last received media record. The server will send all media records that arrived later (not including) than the given timestamp (optional)</li>
</ul>
<h2><a class="anchor" id="autotoc_md30"></a>
Response</h2>
<h3>JSON_OK response</h3>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;records&quot;</span>:[{<span class="stringliteral">&quot;rid&quot;</span>:0,<span class="stringliteral">&quot;device&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>,<span class="stringliteral">&quot;stamp&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>},...],<span class="stringliteral">&quot;result&quot;</span>:<span class="stringliteral">&quot;OK&quot;</span>}</div>
</div><!-- fragment --><ul>
<li><em><b>records</b></em> - the array of media records received</li>
<li><em><b>rid</b></em> - the integer id of a media record</li>
<li><em><b>device</b></em> - record emitter device name.</li>
<li><em><b>stamp</b></em> - the timestamp of a media record. The timestamp is in a format determined by the server and may not match the client's local settings.</li>
</ul>
<h3>JSON_BAD response</h3>
<p><a class="el" href="_j_s_o_n_protocol_home.html#JSON_BAD">JSON_BAD response format and description of error codes</a></p>
<h2><a class="anchor" id="autotoc_md31"></a>
Example</h2>
<div class="fragment"><div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;}&#39; -X POST https://localhost:8080/getRecordCount.json</div>
<div class="line">{&quot;records&quot;:[{&quot;rid&quot;:34,&quot;device&quot;:&quot;d1&quot;,&quot;stamp&quot;:&quot;2022-02-07 12:29:36&quot;}],&quot;result&quot;:&quot;OK&quot;}</div>
<div class="line"> </div>
<div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;,&quot;stamp&quot;:&quot;2022-02-07 12:29:36&quot;}&#39; -X POST https://localhost:8080/getRecordCount.json</div>
<div class="line">{&quot;records&quot;:[],&quot;result&quot;:&quot;OK&quot;}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="getMsgsAndSync"></a>
getMsgsAndSync.json</h1>
<p>Receiving messages from the server, then send sync message. The request and response formats are exactly the same as the <a class="el" href="_j_s_o_n_protocol_home.html#getMsgs">getMsgs.json</a> request/response, except that the server automatically adds a sync message for the requesting device.</p>
<hr  />
<h1><a class="anchor" id="getMsgs"></a>
getMsgs.json</h1>
<p>Receiving messages from the server.</p>
<h2><a class="anchor" id="autotoc_md32"></a>
Request</h2>
<p>The JSON object</p>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;shash&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;stamp&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>}</div>
</div><!-- fragment --><p>Possible (alternative) query string <code><a href="https://localhost/getMsgs.json?shash=string&stamp=string">https://localhost/getMsgs.json?shash=string&amp;stamp=string</a></code></p>
<h3>Parameters</h3>
<ul>
<li><em><b>shash</b></em> - session id (required)</li>
<li><em><b>stamp</b></em> - the timestamp of the last received message. The server will send all messages that arrived later (not include) than the given timestamp, otherwise all messages will be resent from the last <a class="el" href="_j_s_o_n_protocol_home.html#addMsgs">sync message</a> (optional)</li>
</ul>
<h2><a class="anchor" id="autotoc_md33"></a>
Response</h2>
<h3>JSON_OK response</h3>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;msgs&quot;</span>:[{<span class="stringliteral">&quot;msg&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>,<span class="stringliteral">&quot;device&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>,<span class="stringliteral">&quot;stamp&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>,<span class="stringliteral">&quot;params&quot;</span>:{...}},...],<span class="stringliteral">&quot;result&quot;</span>:<span class="stringliteral">&quot;OK&quot;</span>}</div>
</div><!-- fragment --><ul>
<li><em><b>msgs</b></em> - the array of messages received</li>
<li><em><b>msg</b></em> - the name of the message inside the internal logic of your client-server application</li>
<li><em><b>device</b></em> - message emitter device name.</li>
<li><em><b>params</b></em> - message parameters inside the internal logic of your client-server application</li>
<li><em><b>stamp</b></em> - the timestamp of the message. The timestamp is in a format determined by the server and may not match the client's local settings.</li>
</ul>
<h3>JSON_BAD response</h3>
<p><a class="el" href="_j_s_o_n_protocol_home.html#JSON_BAD">JSON_BAD response format and description of error codes</a></p>
<h2><a class="anchor" id="autotoc_md34"></a>
Example</h2>
<div class="fragment"><div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;}&#39; -X POST https://localhost:8080/getMsgs.json</div>
<div class="line">{&quot;msgs&quot;:[{&quot;msg&quot;:&quot;1&quot;,&quot;device&quot;:&quot;dev1&quot;,&quot;params&quot;:{},&quot;stamp&quot;:&quot;2022-02-07 12:28:35&quot;},{&quot;msg&quot;:&quot;2&quot;,&quot;device&quot;:&quot;dev2&quot;,&quot;params&quot;:{},&quot;stamp&quot;:&quot;2022-02-07 14:00:00&quot;}],&quot;result&quot;:&quot;OK&quot;}</div>
<div class="line"> </div>
<div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;,&quot;stamp&quot;:&quot;2022-02-07 12:28:35&quot;}&#39; -X POST https://localhost:8080/getMsgs.json</div>
<div class="line">{&quot;msgs&quot;:[{&quot;msg&quot;:&quot;2&quot;,&quot;device&quot;:&quot;dev2&quot;,&quot;params&quot;:{},&quot;stamp&quot;:&quot;2022-02-07 14:00:00&quot;}],&quot;result&quot;:&quot;OK&quot;}</div>
<div class="line"> </div>
<div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;,&quot;msg&quot;:&quot;sync&quot;}&#39; -X POST https://localhost:8080/addMsgs.json</div>
<div class="line">{&quot;result&quot;:&quot;OK&quot;}</div>
<div class="line"> </div>
<div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;}&#39; -X POST https://localhost:8080/getMsgs.json</div>
<div class="line">{&quot;msgs&quot;:[],&quot;result&quot;:&quot;OK&quot;}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="getDevicesOnline"></a>
getDevicesOnline.json</h1>
<p>Obtaining a list of active (online) devices authorized under the same account</p>
<h2><a class="anchor" id="autotoc_md35"></a>
Request</h2>
<p>The JSON object</p>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;shash&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>}</div>
</div><!-- fragment --><p>Possible (alternative) query string <code><a href="https://localhost/getDevicesOnline.json?shash=string">https://localhost/getDevicesOnline.json?shash=string</a></code></p>
<h3>Parameters</h3>
<ul>
<li><em><b>shash</b></em> - session id (required)</li>
</ul>
<h2><a class="anchor" id="autotoc_md36"></a>
Response</h2>
<h3>JSON_OK response</h3>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;result&quot;</span>:<span class="stringliteral">&quot;OK&quot;</span>,<span class="stringliteral">&quot;devices&quot;</span>:[{<span class="stringliteral">&quot;device&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>,<span class="stringliteral">&quot;meta&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>},...]}</div>
</div><!-- fragment --><ul>
<li><em><b>devices</b></em> - array of online devices received</li>
<li><em><b>device</b></em> - the device name</li>
<li><em><b>meta</b></em> - the meta data for the device</li>
</ul>
<h3>JSON_BAD response</h3>
<p><a class="el" href="_j_s_o_n_protocol_home.html#JSON_BAD">JSON_BAD response format and description of error codes</a></p>
<h2><a class="anchor" id="autotoc_md37"></a>
Example</h2>
<div class="fragment"><div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;}&#39; -X POST https://localhost:8080/getDevicesOnline.json</div>
<div class="line">{&quot;result&quot;:&quot;OK&quot;,&quot;devices&quot;:[{&quot;device&quot;:&quot;user_pc&quot;,&quot;meta&quot;:&quot;some info&quot;},{&quot;device&quot;:&quot;d1c&quot;,&quot;meta&quot;:&quot;{\&quot;param\&quot;:1}&quot;},{&quot;device&quot;:&quot;d2&quot;,&quot;meta&quot;:&quot;cam v0.3&quot;}]}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="getStreams"></a>
getStreams.json</h1>
<p>Obtaining a list of streaming devices authorized under the same account</p>
<h2><a class="anchor" id="autotoc_md38"></a>
Request</h2>
<p>The JSON object</p>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;shash&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>}</div>
</div><!-- fragment --><p>Possible (alternative) query string <code><a href="https://localhost/getStreams.json?shash=string">https://localhost/getStreams.json?shash=string</a></code></p>
<h3>Parameters</h3>
<ul>
<li><em><b>shash</b></em> - session id (required)</li>
</ul>
<h2><a class="anchor" id="autotoc_md39"></a>
Response</h2>
<h3>JSON_OK response</h3>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;result&quot;</span>:<span class="stringliteral">&quot;OK&quot;</span>,<span class="stringliteral">&quot;devices&quot;</span>:[<span class="stringliteral">&quot;:string:&quot;</span>,...]}</div>
</div><!-- fragment --><ul>
<li><em><b>devices</b></em> - array of streaming device names received</li>
</ul>
<h3>JSON_BAD response</h3>
<p><a class="el" href="_j_s_o_n_protocol_home.html#JSON_BAD">JSON_BAD response format and description of error codes</a></p>
<h2><a class="anchor" id="autotoc_md40"></a>
Example</h2>
<div class="fragment"><div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;}&#39; -X POST https://localhost:8080/getStreams.json</div>
<div class="line">{&quot;result&quot;:&quot;OK&quot;,&quot;devices&quot;:[&quot;user_pc&quot;,&quot;camera1&quot;]}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="deleteRecords"></a>
deleteRecords.json</h1>
<p>Delete specified media records from server.</p>
<h2><a class="anchor" id="autotoc_md41"></a>
Request</h2>
<p>The JSON object</p>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;shash&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>, <span class="stringliteral">&quot;records&quot;</span>:[integer_array]}</div>
</div><!-- fragment --><p>Possible (alternative) query string <code><a href="https://localhost/getRecordData.json?shash=string&records=%5Binteger_array%5D">https://localhost/getRecordData.json?shash=string&amp;records=%5Binteger_array%5D</a></code></p>
<h3>Parameters</h3>
<ul>
<li><em><b>shash</b></em> - session id (required)</li>
<li><em><b>records</b></em> - an array of integers, each element of which is a media record ID (required). Media record Ids can be obtained using <a class="el" href="_j_s_o_n_protocol_home.html#getRecordCount">getRecordCount.json</a> request. if the array contains a negative number, the server in addition will delete all records that have a timestamp older than the oldest record passed with the request.</li>
</ul>
<h2><a class="anchor" id="autotoc_md42"></a>
Response</h2>
<h3>JSON_OK response</h3>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;result&quot;</span>:<span class="stringliteral">&quot;OK&quot;</span>}</div>
</div><!-- fragment --><h3>JSON_BAD response</h3>
<p><a class="el" href="_j_s_o_n_protocol_home.html#JSON_BAD">JSON_BAD response format and description of error codes</a></p>
<h2><a class="anchor" id="autotoc_md43"></a>
Example</h2>
<p>The following records exist on the server:</p>
<table class="doxtable">
<tr>
<th>rid<br  />
 </th><th>stamp  </th></tr>
<tr>
<td>30 </td><td>2022-02-07 12:29:32  </td></tr>
<tr>
<td>32 </td><td>2022-02-07 12:30:00  </td></tr>
<tr>
<td>33 </td><td>2022-02-07 13:00:00  </td></tr>
<tr>
<td>34 </td><td>2022-02-07 13:30:00  </td></tr>
<tr>
<td>40 </td><td>2022-02-07 14:00:00  </td></tr>
<tr>
<td>42 </td><td>2022-02-07 14:30:00  </td></tr>
</table>
<div class="fragment"><div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;,&quot;records&quot;:[40]}&#39; -X POST https://localhost:8080/deleteRecords.json</div>
<div class="line">{&quot;result&quot;:&quot;OK&quot;}</div>
</div><!-- fragment --><p>After the request, the following records remained on the server:</p>
<table class="doxtable">
<tr>
<th>rid<br  />
 </th><th>stamp  </th></tr>
<tr>
<td>30 </td><td>2022-02-07 12:29:32  </td></tr>
<tr>
<td>32 </td><td>2022-02-07 12:30:00  </td></tr>
<tr>
<td>33 </td><td>2022-02-07 13:00:00  </td></tr>
<tr>
<td>34 </td><td>2022-02-07 13:30:00  </td></tr>
<tr>
<td>42 </td><td>2022-02-07 14:30:00  </td></tr>
</table>
<div class="fragment"><div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;,&quot;records&quot;:[-1,34,32]}&#39; -X POST https://localhost:8080/deleteRecords.json</div>
<div class="line">{&quot;result&quot;:&quot;OK&quot;}</div>
</div><!-- fragment --><p>After the last request, the following records remained on the server:</p>
<table class="doxtable">
<tr>
<th>rid<br  />
 </th><th>stamp  </th></tr>
<tr>
<td>33 </td><td>2022-02-07 13:00:00  </td></tr>
<tr>
<td>42 </td><td>2022-02-07 14:30:00  </td></tr>
</table>
<hr  />
<h1><a class="anchor" id="heartBit"></a>
heartBit.json</h1>
<p>Sends a "heart beat" message to refresh session state. After a certain time, the server deletes sessions if they do not send messages (for details, see the <a class="el" href="_j_s_o_n_protocol_home.html#getConfig">article</a>). If the client needs to maintain a background connection to the server, "heart beat" messages must be sent periodically.</p>
<h2><a class="anchor" id="autotoc_md44"></a>
Request</h2>
<p>The JSON object</p>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;shash&quot;</span>:<span class="stringliteral">&quot;:string:&quot;</span>}</div>
</div><!-- fragment --><p>Possible (alternative) query string `https://localhost/heartBit.json?name=string&amp;shash=string</p>
<h3>Parameters</h3>
<ul>
<li><em><b>shash</b></em> - new session id returned(required)</li>
</ul>
<h2><a class="anchor" id="autotoc_md45"></a>
Response</h2>
<h3>JSON_OK response</h3>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;result&quot;</span>:<span class="stringliteral">&quot;OK&quot;</span>}</div>
</div><!-- fragment --><h3>JSON_BAD response</h3>
<p><a class="el" href="_j_s_o_n_protocol_home.html#JSON_BAD">JSON_BAD response format and description of error codes</a></p>
<h2><a class="anchor" id="autotoc_md46"></a>
Example</h2>
<div class="fragment"><div class="line">&gt; curl --http2 -k -d &#39;{&quot;shash&quot;:&quot;ra5PNJRgzrqpwbfw8JvHIkWuxJE=&quot;}&#39; -X POST https://localhost:8080/heartBit.json</div>
<div class="line">{&quot;result&quot;:&quot;OK&quot;}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="JSON_BAD"></a>
JSON_BAD message format</h1>
<div class="fragment"><div class="line">{<span class="stringliteral">&quot;result&quot;</span>:<span class="stringliteral">&quot;BAD&quot;</span>,<span class="stringliteral">&quot;code&quot;</span>:integer}</div>
</div><!-- fragment --><ul>
<li><em><b>code</b></em> - value of error code returned by server</li>
</ul>
<h3>Possible error codes</h3>
<div class="fragment"><div class="line">0 - NO_ERROR               - no error detected</div>
<div class="line">1 - UNSPECIFIED            - unspecified error, can be used inside </div>
<div class="line">                             client applications to determinate internal </div>
<div class="line">                             client errors</div>
<div class="line">2 - INTERNAL_UNKNOWN_ERROR - internal server error (server system error)</div>
<div class="line">3 - DATABASE_FAIL          - error inside sqlite3 engine occurred</div>
<div class="line">4 - JSON_PARSER_FAIL       - wrong JSON format</div>
<div class="line">5 - JSON_FAIL              - other handled server errors, caused by </div>
<div class="line">                             misrepresentation of parameters inside </div>
<div class="line">                             request</div>
<div class="line">6 - NO_SUCH_SESSION        - shash (session id) passed by client is </div>
<div class="line">                             wrong or expired</div>
<div class="line">7 - NO_SUCH_USER           - no such account found (wrong user&#39;s name or </div>
<div class="line">                             password)</div>
<div class="line">8 - NO_DEVICES_ONLINE      - no devices found</div>
<div class="line">9 - NO_SUCH_RECORD         - rid (record id) passed by client is wrong </div>
<div class="line">                             or erased</div>
<div class="line">10 - NO_DATA_RETURNED      - the requested record inside database is </div>
<div class="line">                             empty</div>
<div class="line">11 - EMPTY_REQUEST         - client sends an empty request</div>
<div class="line">12 - MALFORMED_REQUEST     - client sends malformed request (some </div>
<div class="line">                             required parameters are missing or </div>
<div class="line">                             malformed) </div>
<div class="line">13 - NO_CHANNEL            - the requested stream does not exist</div>
<div class="line">14 - ERRORED_STREAM        - the stream has errors</div>
<div class="line">15 - NO_SUCH_DEVICE        - device is not founded</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Nov 25 2022 18:45:21 for wcWebCamClient library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
